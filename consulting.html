<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²½ì˜ì»¨ì„¤íŒ… ë³´ê³ ì„œ ì‹ ì²­ | Momentum Biz</title>
    <meta name="description" content="ì „ë¬¸ ì»¨ì„¤í„´íŠ¸ê°€ ì‘ì„±í•˜ëŠ” ë§ì¶¤í˜• ê²½ì˜ë¶„ì„ ë³´ê³ ì„œ. AI ê¸°ë°˜ ê²½ì˜ ì§„ë‹¨ ë° ì „ëµ ì œì•ˆ.">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e3a5f',
                        secondary: '#3b82f6',
                        accent: '#06b6d4',
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸš€</text></svg>">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>

    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%); }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Navigation -->
    <nav class="fixed w-full bg-white/95 backdrop-blur-sm shadow-sm z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="/" class="flex items-center space-x-2">
                    <img src="images/logo.jpg" alt="Momentum Biz ë¡œê³ " class="h-10 w-auto">
                    <span class="text-2xl font-bold text-primary">Momentum Biz</span>
                </a>

                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="/#services" class="text-gray-600 hover:text-primary transition">ì„œë¹„ìŠ¤</a>
                    <a href="/#about" class="text-gray-600 hover:text-primary transition">íšŒì‚¬ì†Œê°œ</a>
                    <a href="blog.html" class="text-gray-600 hover:text-primary transition">ë¸”ë¡œê·¸</a>
                    <a href="faq.html" class="text-gray-600 hover:text-primary transition">FAQ</a>
                    <a href="consulting.html" class="text-secondary font-medium">ë³´ê³ ì„œ ì‹ ì²­</a>
                    <a href="/#contact" class="bg-primary text-white px-5 py-2 rounded-lg hover:bg-primary/90 transition">ìƒë‹´ì‹ ì²­</a>
                </div>

                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <a href="/#services" class="block py-2 text-gray-600 hover:text-primary">ì„œë¹„ìŠ¤</a>
                <a href="/#about" class="block py-2 text-gray-600 hover:text-primary">íšŒì‚¬ì†Œê°œ</a>
                <a href="blog.html" class="block py-2 text-gray-600 hover:text-primary">ë¸”ë¡œê·¸</a>
                <a href="faq.html" class="block py-2 text-gray-600 hover:text-primary">FAQ</a>
                <a href="consulting.html" class="block py-2 text-secondary font-medium">ë³´ê³ ì„œ ì‹ ì²­</a>
                <a href="/#contact" class="block py-2 text-primary font-medium">ìƒë‹´ì‹ ì²­</a>
            </div>
        </div>
    </nav>

    <main class="pt-24 pb-16">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">

            <!-- ë¡œê·¸ì¸ ì „: ì†Œê°œ + Google ë¡œê·¸ì¸ -->
            <section id="login-section">
                <!-- ì†Œê°œ í—¤ë” -->
                <div class="text-center mb-10">
                    <h1 class="text-3xl md:text-4xl font-bold text-primary mb-4">ê²½ì˜ì»¨ì„¤íŒ… ë³´ê³ ì„œ</h1>
                    <p class="text-gray-600 text-lg">ì „ë¬¸ ì»¨ì„¤í„´íŠ¸ê°€ ì‘ì„±í•˜ëŠ” ë§ì¶¤í˜• ê²½ì˜ë¶„ì„ ë³´ê³ ì„œ</p>
                </div>

                <div class="bg-white rounded-2xl shadow-lg p-8 md:p-12 max-w-lg mx-auto">
                    <div class="text-center mb-8">
                        <div class="inline-block bg-gradient-to-r from-primary to-secondary text-white text-3xl font-bold px-6 py-3 rounded-xl mb-6">
                            $5 <span class="text-lg font-normal opacity-80">/ê±´</span>
                        </div>
                    </div>

                    <ul class="space-y-3 mb-8 text-gray-700">
                        <li class="flex items-center">
                            <svg class="w-5 h-5 text-green-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
                            ê¸°ì—… í˜„í™© ë¶„ì„ ë° ì§„ë‹¨
                        </li>
                        <li class="flex items-center">
                            <svg class="w-5 h-5 text-green-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
                            ê²½ì˜ ì „ëµ ì œì•ˆ
                        </li>
                        <li class="flex items-center">
                            <svg class="w-5 h-5 text-green-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
                            ì¬ë¬´ ë¶„ì„ ë¦¬í¬íŠ¸
                        </li>
                        <li class="flex items-center">
                            <svg class="w-5 h-5 text-green-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
                            AI ê¸°ë°˜ ë§ì¶¤ ì†”ë£¨ì…˜
                        </li>
                    </ul>

                    <button onclick="handleGoogleLogin()" class="w-full flex items-center justify-center gap-3 bg-white border-2 border-gray-200 hover:border-primary hover:bg-gray-50 text-gray-700 font-medium py-3 px-6 rounded-xl transition">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        Google ê³„ì •ìœ¼ë¡œ ì‹œì‘í•˜ê¸°
                    </button>
                </div>
            </section>

            <!-- ë¡œê·¸ì¸ í›„: ê²°ì œ í¼ -->
            <section id="payment-section" class="hidden">
                <!-- ì‚¬ìš©ì ì •ë³´ ë°” -->
                <div id="user-info" class="flex items-center justify-between bg-white rounded-xl shadow-sm px-6 py-3 mb-8">
                    <div class="flex items-center gap-3">
                        <img id="user-avatar" src="" alt="avatar" class="w-10 h-10 rounded-full">
                        <span id="user-name" class="font-medium text-gray-800"></span>
                    </div>
                    <button onclick="handleLogout()" class="text-sm text-gray-500 hover:text-red-500 transition">ë¡œê·¸ì•„ì›ƒ</button>
                </div>

                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-primary mb-2">ë³´ê³ ì„œ ì‹ ì²­</h2>
                    <p class="text-gray-500 mb-6">ê²°ì œ ì „ ì•„ë˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>

                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div>
                            <label for="input-company" class="block text-sm font-medium text-gray-700 mb-1">íšŒì‚¬ëª… *</label>
                            <input type="text" id="input-company" placeholder="(ì£¼)íšŒì‚¬ëª…" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent outline-none transition">
                        </div>
                        <div>
                            <label for="input-ceo" class="block text-sm font-medium text-gray-700 mb-1">ëŒ€í‘œìëª… *</label>
                            <input type="text" id="input-ceo" placeholder="í™ê¸¸ë™" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent outline-none transition">
                        </div>
                        <div>
                            <label for="input-email" class="block text-sm font-medium text-gray-700 mb-1">ì´ë©”ì¼ *</label>
                            <input type="email" id="input-email" placeholder="example@email.com" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent outline-none transition">
                        </div>
                        <div>
                            <label for="input-phone" class="block text-sm font-medium text-gray-700 mb-1">íœ´ëŒ€í°ë²ˆí˜¸ *</label>
                            <input type="tel" id="input-phone" placeholder="010-1234-5678" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent outline-none transition">
                        </div>
                    </div>

                    <!-- ê²°ì œ ìš”ì•½ -->
                    <div class="bg-gray-50 rounded-xl p-5 mb-6">
                        <div class="flex justify-between text-gray-600 mb-2">
                            <span>ê²½ì˜ì»¨ì„¤íŒ… ë³´ê³ ì„œ</span>
                            <span>1ê±´</span>
                        </div>
                        <div class="flex justify-between text-lg font-bold text-primary border-t pt-3">
                            <span>ê²°ì œ ê¸ˆì•¡</span>
                            <span>$5.00</span>
                        </div>
                    </div>

                    <!-- PayPal ë²„íŠ¼ -->
                    <div id="paypal-button-container">
                        <p class="text-center text-gray-400 py-5">PayPal ê²°ì œ ë²„íŠ¼ ë¡œë”© ì¤‘...</p>
                    </div>
                    <p id="payment-error" class="text-red-500 text-sm text-center mt-2 hidden"></p>
                </div>
            </section>

            <!-- ê²°ì œ ì™„ë£Œ -->
            <section id="complete-section" class="hidden">
                <div class="bg-white rounded-2xl shadow-lg p-8 md:p-12 text-center max-w-lg mx-auto">
                    <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                        <svg class="w-10 h-10 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
                        </svg>
                    </div>
                    <h2 class="text-2xl font-bold text-primary mb-2">ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
                    <p class="text-gray-500 mb-6">ê²½ì˜ì»¨ì„¤íŒ… ë³´ê³ ì„œê°€ ê³§ ì¤€ë¹„ë©ë‹ˆë‹¤.</p>
                    <div id="receipt-info" class="text-left bg-gray-50 rounded-xl p-5 mb-6 text-sm text-gray-700 space-y-1"></div>
                    <button onclick="resetToPayment()" class="bg-primary text-white px-8 py-3 rounded-xl hover:bg-primary/90 transition font-medium">
                        ì¶”ê°€ ì‹ ì²­í•˜ê¸°
                    </button>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="gradient-bg text-gray-300 py-10">
        <div class="max-w-6xl mx-auto px-4 text-center text-sm">
            <p>&copy; 2024 Momentum Biz (ì—ì´ë£¬ì»´í¼ë‹ˆ). All rights reserved.</p>
        </div>
    </footer>

    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AWl2XgqBKrm6KC6DNiycu7p2XZW5A5eo4rucMprRMzJnNA3axCFX4cl9pkvblkVTBOIlDc6m72756Sa-&currency=USD"></script>

    <script>
    // ============================================
    // Firebase ì„¤ì •
    // ============================================
    const firebaseConfig = {
        apiKey: "AIzaSyBWHTskXr1izeV0wWS8iPzsD4L4IHdoYyY",
        authDomain: "consultpay-13d53.firebaseapp.com",
        projectId: "consultpay-13d53",
        storageBucket: "consultpay-13d53.firebasestorage.app",
        messagingSenderId: "296494970090",
        appId: "1:296494970090:web:2e0aed355f5ec007239393",
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const provider = new firebase.auth.GoogleAuthProvider();

    let currentUser = null;

    // ============================================
    // UI ìš”ì†Œ
    // ============================================
    const loginSection = document.getElementById("login-section");
    const paymentSection = document.getElementById("payment-section");
    const completeSection = document.getElementById("complete-section");
    const inputCompany = document.getElementById("input-company");
    const inputCeo = document.getElementById("input-ceo");
    const inputEmail = document.getElementById("input-email");
    const inputPhone = document.getElementById("input-phone");
    const paymentError = document.getElementById("payment-error");

    // ============================================
    // Auth ìƒíƒœ ê´€ë¦¬
    // ============================================
    auth.onAuthStateChanged((user) => {
        if (user) {
            currentUser = user;
            showPaymentScreen(user);
        } else {
            currentUser = null;
            showLoginScreen();
        }
    });

    function showLoginScreen() {
        loginSection.classList.remove("hidden");
        paymentSection.classList.add("hidden");
        completeSection.classList.add("hidden");
    }

    let paypalRendered = false;

    function showPaymentScreen(user) {
        loginSection.classList.add("hidden");
        paymentSection.classList.remove("hidden");
        completeSection.classList.add("hidden");

        document.getElementById("user-avatar").src = user.photoURL || "";
        document.getElementById("user-name").textContent = user.displayName || "ì‚¬ìš©ì";
        inputEmail.value = user.email || "";

        if (!paypalRendered) {
            renderPayPalButton();
            paypalRendered = true;
        }
    }

    function showCompleteScreen(data) {
        loginSection.classList.add("hidden");
        paymentSection.classList.add("hidden");
        completeSection.classList.remove("hidden");

        document.getElementById("receipt-info").innerHTML = `
            <p><strong>ì£¼ë¬¸ë²ˆí˜¸:</strong> ${data.order_id}</p>
            <p><strong>íšŒì‚¬ëª…:</strong> ${data.user.company}</p>
            <p><strong>ëŒ€í‘œì:</strong> ${data.user.ceo}</p>
            <p><strong>ì´ë©”ì¼:</strong> ${data.user.email}</p>
            <p><strong>ì—°ë½ì²˜:</strong> ${data.user.phone}</p>
            <p><strong>ê²°ì œê¸ˆì•¡:</strong> $${data.amount}</p>
            <p><strong>ê²°ì œì‹œê°„:</strong> ${new Date(data.timestamp).toLocaleString("ko-KR")}</p>
        `;
    }

    // ============================================
    // Google ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
    // ============================================
    function handleGoogleLogin() {
        auth.signInWithPopup(provider).catch((err) => {
            console.error("ë¡œê·¸ì¸ ì‹¤íŒ¨:", err);
            alert("ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        });
    }

    function handleLogout() {
        auth.signOut();
    }

    // ============================================
    // ìœ íš¨ì„± ê²€ì‚¬
    // ============================================
    function validateForm() {
        const company = inputCompany.value.trim();
        const ceo = inputCeo.value.trim();
        const email = inputEmail.value.trim();
        const phone = inputPhone.value.trim();

        if (!company) { showError("íšŒì‚¬ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."); return false; }
        if (!ceo) { showError("ëŒ€í‘œìëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."); return false; }
        if (!email) { showError("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."); return false; }
        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { showError("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."); return false; }
        if (!phone) { showError("íœ´ëŒ€í°ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return false; }
        if (!/^[\d\-+() ]{10,}$/.test(phone)) { showError("ì˜¬ë°”ë¥¸ íœ´ëŒ€í°ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return false; }

        paymentError.classList.add("hidden");
        return true;
    }

    function showError(msg) {
        paymentError.textContent = msg;
        paymentError.classList.remove("hidden");
    }

    // ============================================
    // PayPal ê²°ì œ ë²„íŠ¼
    // ============================================
    function renderPayPalButton() {
        if (typeof paypal === "undefined") {
            document.getElementById("paypal-button-container").innerHTML =
                '<p class="text-center text-red-500 py-4">PayPal SDK ë¡œë“œ ì‹¤íŒ¨ - ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì„¸ìš”</p>';
            return;
        }
        paypal.Buttons({
            style: { layout: "vertical", color: "blue", shape: "rect", label: "pay", height: 50 },

            onClick(data, actions) {
                if (!validateForm()) return actions.reject();
                return actions.resolve();
            },

            async createOrder() {
                const res = await fetch("/api/create-order", { method: "POST" });
                const order = await res.json();
                if (order.error) throw new Error(order.error);
                return order.id;
            },

            async onApprove(data) {
                const userPayload = {
                    name: currentUser.displayName || "ì´ë¦„ì—†ìŒ",
                    company: inputCompany.value.trim(),
                    ceo: inputCeo.value.trim(),
                    email: inputEmail.value.trim(),
                    phone: inputPhone.value.trim(),
                    uid: currentUser.uid,
                };

                const res = await fetch("/api/capture-order", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ orderID: data.orderID, userInfo: userPayload }),
                });
                const result = await res.json();

                if (result.status === "COMPLETED") {
                    showCompleteScreen(result.paymentData);
                } else {
                    showError("ê²°ì œ ì²˜ë¦¬ ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                }
            },

            onError(err) {
                console.error("PayPal ì—ëŸ¬:", err);
                showError("ê²°ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            },
        }).render("#paypal-button-container");
    }

    // ============================================
    // ì¶”ê°€ ì‹ ì²­
    // ============================================
    function resetToPayment() {
        inputCompany.value = "";
        inputCeo.value = "";
        inputPhone.value = "";
        showPaymentScreen(currentUser);
    }

    // ============================================
    // Mobile Menu
    // ============================================
    document.getElementById('mobile-menu-btn').addEventListener('click', () => {
        document.getElementById('mobile-menu').classList.toggle('hidden');
    });
    </script>
</body>
</html>
